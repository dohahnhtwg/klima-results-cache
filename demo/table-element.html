<link rel="import" href="../klima-results-cache.html">
<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<dom-module id="table-element">
  <style is="custom-style">
    paper-button {
      margin: 10px;
    }
    div {
      margin: 10px;
    }
  </style>
  <template>
    <div>
      <paper-button raised on-tap="_showTotalHospital">Total Hospital</paper-button>
      <paper-button raised on-tap="_showInternalMedicine">Internal Medicine</paper-button>
      <paper-button raised on-tap="_showSurgicalWard">Surgical Ward</paper-button>
      <paper-button raised on-tap="_showGynecology">Gynecology</paper-button>
      <h3>Items:</h3>
      <div>
        [[items]]
      </div>
      <h3>Columns:</h3>
      <div>
        [[columns]]
      </div>
      <h3>Header:</h3>
      <div>
        [[header]]
      </div>
    </div>
  </template>
  <script>
    Polymer({
      is: 'table-element',
      behaviors: [KlimaResultsBehavior],
      properties: {
        items: {
          type: String,
          value: "No Data"
        },
        columns: {
          type: String,
          value: "No Data"
        },
        header: {
          type: String,
          value: "No Data"
        }
      },

      _showTotalHospital: function() {
        this.getTableData(0, "allocationData", "total", function(tableData) {
          this._changeContent(tableData);
        }.bind(this))
      },
      _showInternalMedicine: function() {
        this.getTableData(0, "allocationData", "internalMedicine", function(tableData) {
          this._changeContent(tableData);
        }.bind(this))
      },
      _showSurgicalWard: function() {
        this.getTableData(0, "allocationData", "surgicalWard", function(tableData) {
          this._changeContent(tableData);
        }.bind(this))
      },
      _showGynecology: function() {
        this.getTableData(0, "allocationData", "gynecology", function(tableData) {
          this._changeContent(tableData);
        }.bind(this))
      },
      _changeContent: function(tableData)  {
        this.items = JSON.stringify(tableData.items);
        this.columns = JSON.stringify(tableData.columns);
        this.header = JSON.stringify(tableData.header);
      }
    })
  </script>
</dom-module>
